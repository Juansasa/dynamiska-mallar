<div class="befattning-selection">
    <ui-select ng-model="model[options.key]" theme="bootstrap" ng-disabled="disabled" reset-search-input="false">
        <ui-select-match placeholder="{{to.placeholder}}">{{$select.selected.name}}</ui-select-match>
        <ui-select-choices repeat="{name: option.value, explanations: option.explanations} as option in to.options | filter: $select.search">
            <div ng-bind-html="option.name | highlight: $select.search"></div>
        </ui-select-choices>
    </ui-select>
    <div ng-if="to.showPrevileges && (to.selectedValueIndex > -1) && 
        (to.options[to.selectedValueIndex].explanations || to.options[to.selectedValueIndex].subInput || to.options[to.selectedValueIndex].subOptions)" 
        class="alert alert-info">
        <div class="subinput" ng-if="to.options[to.selectedValueIndex].subInput">
            <formly-form model="model[options.key]" fields="to.options[to.selectedValueIndex].subInput">
            </formly-form>
        </div>
        <p ng-repeat="spec in to.options[to.selectedValueIndex].explanations"><i class="fa fa-check fa-lg"></i>{{spec}}</p>
        <div class="suboptions" ng-if="to.options[to.selectedValueIndex].subOptions">
            <formly-form model="model[options.key]" fields="to.options[to.selectedValueIndex].subOptions">
            </formly-form>
        </div>
    </div>
</div>
